<html>
	<head>
		<title>Phantom by HTML5 UP</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<script src="assets/js/svg.min.js"></script>
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body>
<button id="myBtn">Open Modal</button>

<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
      <span class="close">&times;</span>

    <div class="modal-body">
<div id="drawing"></div>

    </div>
  </div>

</div>

<div id="invDraw"></div>
</body>
</html>
<script>
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];
var draw = SVG('drawing').size(1000, 1000);
DrawMessage(draw, 0, 0);

var line = draw.line(0, 130, 0, 500);
line.stroke({ color: '#f06', width: 10, linecap: 'round' })

DrawMessage(draw, 50, 130);
DrawMessage(draw, 50, 230);

// When the user clicks the button, open the modal 
btn.onclick = function() {
  modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}




/* 
var text = draw.text("Text goes here").font({ fill: 'red', 'font-size': '8vh', family: 'Inconsolata' });
text.move(image.cx() + 80,image.cy()); */

function DrawMessage(draw, imageXPos, imageYPos){
var clip = draw.clip();
var circle = draw.circle(100).fill('#fff');
var image = draw.image('https://cdn.img42.com/4b6f5e63ac50c95fe147052d8a4db676.jpeg').move(imageXPos,imageYPos);

image.size(100, 100);
clip.add(circle.center(image.cx(), image.cy()));

image.clipWith(clip);
var text = DrawWrappedText(draw, "Ahdgsdg sdgsdg sdgsdg sdgsdg sdgsdsdg sdgsdgdsgsuhiuyu ugiugug iug ugiug iugiugiugdg", 150);


text.font({ fill: 'red', family: 'Inconsolata' });
text.move(image.cx() + 80,image.cy());

}

function DrawWrappedText(draw, unwrappedText, width){
var invisibleDraw = SVG('invDraw').size(500, 500);
//Put this at top for better performance
invisibleDraw.visible(false);
var textLines = [];
var invText = invisibleDraw.text("");
invText.build(true);
var testString = unwrappedText;
 var words = testString.split(" ");
 var currentLine = "";
for(var j = 0; j < words.length; j++ ){
var wordTspan = invText.tspan(words[j]);
if(wordTspan.bbox().width > width){
textLines.push(currentLine);
currentLine = words[j];
invText.node.removeChild(invText.node.lastChild);
invText.clear();
}
else{
currentLine+= " " + words[j];
}
}
textLines.push(currentLine);

var text = draw.text(function(add) {
for(var i =0; i < textLines.length; i++){
  add.tspan(textLines[i]).newLine();
}
});
text.build(true);

return text;

}
</script>